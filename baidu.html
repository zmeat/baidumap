<!-- created by zmeat at 2016.8.5 -->

<!DOCTYPE html>  
<html>  
<head>  
<meta name="viewport" content="initial-scale=1.0, user-scalable=no width=device-width" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
<title>宁夏旅游地图</title>  
    <link type="text/css" href="./weui.css" rel="stylesheet">
    <link type="text/css" href="./baidu.css" rel="stylesheet">
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=VeQlPcE6TGiCgphstKk6ppc3">
	//v2.0版本的引用方式：src="http://api.map.baidu.com/api?v=2.0&ak=您的密钥"
	//v1.4版本及以前版本的引用方式：src="http://api.map.baidu.com/api?v=1.4&key=您的密钥&callback=initialize"
	//api.map.baidu.com/getscript?v=2.0&ak=VeQlPcE6TGiCgphstKk6ppc3&services=&t=20160804144823
	</script>
	<script type="text/javascript" src="./jquery.js"></script>
	<script type="text/javascript" src="./doT.js"></script>  
	<script type="text/javascript" src="./baidu.js"></script>
</head>  
 
<body> 
	<!-- template start -->
<script  id="interpolationtmpl"  type="text/template" charset="utf-8">
	{{ if(it&&it.citys&&it.types){ }}
		<div class="city_box" id="city_box">
			{{ for (var i =0; i < it.citys.items.length; i++){ }}
				{{if(a = 0){}}
					<span class="last" data-city="{{= it.citys.items[i].name}}">{{= it.citys.items[i].name}}</span>
				{{}else{}}
					<span data-city="{{= it.citys.items[i].name}}">{{= it.citys.items[i].name}}</span>
				{{}}}
	        {{ } }}
		</div>
		<hr />
		<div>
			{{ for(var j = 0; j < it.types.items.length; j++) { }}
			    <a href="javascript:;" class="F_cell">
			        <div class="F_icon">
			            <img src="{{= it.types.items[j].icon}}" alt="">
			        </div>
			        <p>
			           	{{= it.types.items[j].name}}
			        </p>
			    </a>
		    {{ } }}
		</div>
		{{ }else{ }}
			<h2>暂无数据</h2>
		{{ } }}
</script>
<!-- template end -->

	<div style="position:fixed;top: 3%;right:4%; z-index:1" class="icon_menu">
	    <img src="./images/xialacaidan.png">
	    <a>    
	    	<span id="current_city">宁夏</span>
	    	<img src="./images/pulldown.png" />
	    </a>
	</div>

	<div class="F_menu_box F_hide alert_box" id="alert_menu_box">
		<!-- 占位 -->
	</div>

	<div class="F_mask F_hide mask"></div>

	<div class="weui_dialog_alert F_hide" id="divalert">
	    <div style="z-index: 1;width: 100%;height: 100%;top: 0;left: 0;background: rgba(0, 0, 0, 0.6);">
	    </div>
	    <div class="weui_dialog" style="top:88%;width:95%">
	        <div class="weui_dialog_bd" id="alertNote">
	            <div class="info-box">
	               <p class="title"><strong id="utitle">占位占位</strong></p>
	               <div class="other-info">
	                   <span id="udist" class="dist">
	                   <i class="dist-icon"></i>0.00km
	                   </span>
	                   <span id="ulevel" class="spanlevel"><i class="location-icon"></i>描述占位描述占位...</span>
	                   <input id="hidareacode" type="hidden" />
	                   <input id="hidunitid" type="hidden" />
	                   <input id="hidlat" type="hidden" />
	                   <input id="hidlng" type="hidden" />
	               </div>
	            </div>
	            <div class="detail-link">详情
	            </div>
	        </div>
	        <div class="weui_dialog_ft" style="margin-top:10px;left:16px;width:91%;line-height:35px;">
	            <a onclick="Navigation()" href="javascript:;" class="weui_btn_dialog primary" style="color:#3b3b3b;font-size:14px;"><span><i class="icon">↱</i>到这去</span></a>
	        </div>
	    </div>
	</div>
	<div id="container"></div> 

<script>
	var data = {
		"citys": {
			"perColumn": 4,
			"items": [
				{
					"name": "银川市",
					"index": 0
				},
				{
					"name": "吴忠市",
					"index": 1
				},
				{
					"name": "固原市",
					"index": 2
				},
				{
					"name": "石嘴山市",
					"index": 3
				},
				{
					"name": "青铜峡市",
					"index": 4
				},
				{
					"name": "西吉市",
					"index": 5
				},
				{
					"name": "银川市",
					"index": 0
				},
				{
					"name": "中卫市",
					"index": 1
				},
				{
					"name": "灵武市",
					"index": 2
				}
			]
		},
		"types": {
			"perColumn":3,
			"items":[
				{
					"name": "景区",
					"icon": "./images/jingqu.png",
					"index": 0
				},
				{
					"name": "加油站",
					"icon": "./images/jiayouzhan.png",
					"index": 1
				},
				{
					"name": "服务区",
					"icon": "./images/fuwuqu.png",
					"index": 2
				},
				{
					"name": "酒店",
					"icon": "./images/jiudian.png",
					"index": 3
				},
				{
					"name": "公厕",
					"icon": "./images/gongce.png",
					"index": 4
				},
				{
					"name": "美食",
					"icon": "./images/meishi.png",
					"index": 5
				},
				{
					"name": "农家乐",
					"icon": "./images/nongjiale.png",
					"index": 6
				},
				{
					"name": "停车场",
					"icon": "./images/jiayouzhan.png",
					"index": 7
				}		
			]
		}
	};

	var originRate = {
		"2" : "50",
		"3" : "33.3",
		"4" : "25",
		"5" : "20",
		"6" : "16.6"
	};
	var html = $("#interpolationtmpl").html();
	var city_rate = originRate[data.citys.perColumn || 4] || 25;
	var type_rate = originRate[data.types.perColumn || 4] || 25;

	$("#alert_menu_box").html(doT.template(html)(data));

	$(".F_cell").css({"width": type_rate+"%"});
	$(".city_box span").css({"width": city_rate+"%"});
</script>
</body>  
</html>